local mailboxRemote = game:GetService("ReplicatedStorage").Network["Mailbox: Send"]

local function getInventory()
    for i,v in pairs(getgc(true)) do
        if type(v) == "table" and rawget(v, "Inventory") and type(v.Inventory) == "table" then
            return v.Inventory
        end
    end
    return nil
end

while true do
    local inv = getInventory()
    if inv then
        -- Huges verschicken (immer einzeln)
        if inv.Pet then
            for uid, petData in pairs(inv.Pet) do
                if petData.id and string.find(petData.id, "Huge") then
                    local success, result = pcall(function()
                        return mailboxRemote:InvokeServer(getgenv().AutoMailUser, "...", "Pet", uid, 1)
                    end)
                    task.wait(1)
                end
            end
        end

        if inv.Misc then
            for uid, itemData in pairs(inv.Misc) do
                if itemData.id and string.find(itemData.id, "Tower Defense Gift") then
                    local amount = itemData._am or 1
                    if amount >= getgenv().GiftThreshold then
                        local success, result = pcall(function()
                            return mailboxRemote:InvokeServer(getgenv().AutoMailUser, "...", "Misc", uid, getgenv().GiftThreshold)
                        end)
                        task.wait(1)
                    end
                end
            end
        end

    else
        warn("‚ùå Kein Inventar gefunden!")
    end
    task.wait(5)
end
